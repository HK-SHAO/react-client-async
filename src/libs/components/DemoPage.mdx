import RecursiveAsyncDemo from '#components/RecursiveAsyncDemo';
import UseAsyncDemo from '#components/UseAsyncDemo';
import AsyncDemo from '#components/AsyncDemo';
import LatestVersion from './LatestVersion';
import Footer from "#components/Footer";
import Title from "#components/Title";
import Card from "#components/Card";

import { toast } from 'react-toastify';

<div className='w-full flex justify-center -mb-6 -mt-4'>
  <div className='w-fit text-5xl relative hover:rotate-180 transition-transform select-none aspect-square grid place-items-center'>âš›ï¸â³</div>
</div>

# <Title/>

<div className="w-full text-center -mt-8 mb-10 p-0">
  <p className='m-0 p-0 text-base/snug text-gray-500 font-bold'>Easy to use async function in React components! ğŸš€</p>
</div>

<div className='w-full flex justify-center -mt-4'>
  <div className="place-items-center grid bg-pink-600 dark:bg-pink-800 rounded-md w-fit font-bold text-sm text-white hover:shadow-lg transition-shadow dark:hover:bg-pink-700 hover:bg-pink-500">
    <LatestVersion />
  </div>
</div>

<Card className='pb-4 mt-10'>

## <a href='#Intro' id="Intro">ğŸ‘‹ Introduction</a>

<p align="center">
  <a href="#" type="button" onClick={()=>{ toast.info("Here is the demo page! ğŸ‰") }}>ğŸ¬ Demo</a>
  <span> Â· </span>
  <a href="https://github.com/HK-SHAO/react-client-async" target="_blank" rel="noreferrer">ğŸŒŸ GitHub</a>
  <span> Â· </span>
  <a href="https://www.npmjs.com/package/react-client-async" target="_blank" rel="noreferrer">ğŸ“¦ Package</a>
</p>

This package helps you use async function **<u>without</u>** the need to migrate to `âš›ï¸ React 19` and server-side rendering! 

- âœ¨ Supports utility hooks to create and render async tasks.
- âœ¨ Supports `AbortSignal` and automatic abort on re-render.

## <a href='#Install' id="Install">ğŸš€ Install</a>


```bash
npm i react-client-async
```

</Card>

<Card className='mt-10 pb-8'>

## <a href='#useAsync' id="useAsync">âœ… `useAsync` Hook</a>

You can use the `useAsync` hook to create a task.

```tsx
console.log(useAsync(fn, args, options));
```

<UseAsyncDemo />

</Card>

<Card className='mt-10 pb-8'>

## <a href='#Async' id="Async">âœ… `Async` Component</a>

You can use the `Async` to render an async component.

```tsx
<Async
  $fc={fc} // may be an async function component
  $waiting={waiting} // waiting component
  $fallback={fallback} // fallback component
  {...props} // props for the function component
/>
```

<AsyncDemo />

</Card>

<Card className='mt-10 pb-8'>

## <a href="#RecursiveDemo" id="RecursiveDemo">ğŸ¬ `Demo` of Recursive Async Component</a>

Easy to `wrap` a recursive async component and memoize it.

```tsx
const Rec: FC<{ n: number }> = wrap(
  async ({ [$signal]: signal, n }) =>
    // break the recursion
    (n <= 0) ? 0 : (
    // delay and recursion
      <>
        {await delay(99, signal)}
        {n} <Rec n={n - 1} /> {n}
      </>
    )
);
```

<RecursiveAsyncDemo />

</Card>


<Card className='mt-10 pb-2 mb-10'>

## <a href='#Next' id="Next">â³ What is Next?</a>

- â³ `useAsyncIterable` hook
- â³ `AsyncIterable` component

```tsx
async function* IterableComponent() {
  yield* OtherIterableComponent();
  yield  await component1();
  yield  await component2();
  yield  <div>...</div>;
}
```

- ğŸŒŸ Star this repo if you like it! ğŸ¤©ğŸ¤©ğŸ¤©
- ğŸ‘‰ [github.com/hk-shao/react-client-async](https://github.com/HK-SHAO/react-client-async)

Looking forward to your feedback or contribution! ğŸš€ğŸš€ğŸš€

</Card>


<Footer />
